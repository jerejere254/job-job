"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _react = require("react");

var _propTypes = _interopRequireDefault(require("prop-types"));

var _reactDom = require("react-dom");

var _hooks = require("../../hooks");

// Based on https://github.com/mantinedev/mantine/blob/master/src/mantine-core/src/Portal/Portal.tsx
var Portal = function Portal(props) {
  var children = props.children;

  var _useState = (0, _react.useState)(false),
      _useState2 = (0, _slicedToArray2["default"])(_useState, 2),
      mounted = _useState2[0],
      setMounted = _useState2[1];

  var ref = (0, _react.useRef)();
  (0, _hooks.useIsomorphicLayoutEffect)(function () {
    setMounted(true);
    ref.current = document.createElement('div');
    ref.current.setAttribute('evergreen-portal-container', '');
    document.body.appendChild(ref.current);
    return function () {
      document.body.removeChild(ref.current);
    };
  }, []);

  if (!mounted) {
    return null;
  }

  return /*#__PURE__*/(0, _reactDom.createPortal)(children, ref.current);
};

Portal.propTypes = {
  children: _propTypes["default"].node.isRequired
};
var _default = Portal;
exports["default"] = _default;